<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display&display=swap" rel="stylesheet">
 

    <title>Gym Buddy</title>
  </head>
  <body class="survey">
    <!--Jumbotron -->
    <div class="container">
      <br />
      <h2 class="">Survey Questions</h2>
      <hr />
      <h3><strong>About You</strong></h3>
      <h4>Name (Required)</h4>
      <input type="text" id="name" class="form-control" required />
      <br />
      <h4>Link to Photo Image (Required)</h4>
      <input type="text" id="photo" class="form-control" required />
      <hr />
      <br />
      <!-- 10 Questions -->
      <div class="group-form">
        <h3><strong>Question 1</strong></h3>
        <h4>You'd rather workout in the mornings.</h4>
        <select class="chosen-select" id="q1">
          <option value="empty"></option>
          <option value="1">1(Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5(Strongly agree</option>
        </select>
      </div>
      <br />
      <br />
      <h3><strong>Question 2</strong></h3>
      <h4>
       You workout 3-4 days a week.
      </h4>
      <select class="chosen-select" id="q2">
        <option value="empty"></option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly agree</option>
      </select>
      <br />
      <br />
      <h3><strong>Question 3</strong></h3>
      <h4>
       You're currently at a beginner fitness level.
      </h4>
      <select class="chosen-select" id="q3">
        <option value="empty"></option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly agree</option>
      </select>
      <br />
      <br />
      <h3><strong>Question 4</strong></h3>
      <h4> You want to lose weight?.</h4>
      <select class="chosen-select" id="q4">
        <option value="empty"></option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly agree</option>
      </select>
      <br />
      <br />
      <h3><strong>Question 5</strong></h3>
      <h4>You want you to pack on some muscle mass.</h4>
      <select class="chosen-select" id="q5">
        <option value="empty"></option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly agree</option>
      </select>
      <br />
      <br />
      <h3><strong>Question 6</strong></h3>
      <h4>
        You'd rather workout in a gym over training outdoors?
      </h4>
      <select class="chosen-select" id="q6">
        <option value="empty"></option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly agree</option>
      </select>
      <br />
      <br />
      <h3><strong>Question 7</strong></h3>
      <h4>
       You are self motivated?
      </h4>
      <select class="chosen-select" id="q7">
        <option value="empty"></option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly agree</option>
      </select>
      <br />
      <br />
      <h3><strong>Question 8</strong></h3>
      <h4>You workout 1-3 days a week</h4>
      <select class="chosen-select" id="q8">
        <option value="empty"></option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly agree</option>
      </select>
      <br />
      <br />
      <h3><strong>Question 9</strong></h3>
      <h4>
        You love cardio.
      </h4>
      <select class="chosen-select" id="q9">
        <option value="empty"></option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly agree</option>
      </select>
      <br />
      <br />
      <h3><strong>Question 10</strong></h3>
      <h4>
       You enjoy weight training.
      </h4>
      <select class="chosen-select" id="q10">
        <option value="empty"></option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly agree</option>
      </select>
    <br>
    <br>
    <br>
   
      <button
        type="button"
        class="btn btn-primary btn-lg btn-block"
        id="submit"
      >
        Submit
      </button>
    </div>




    <br>
    <br>
    <br>
    <!-- Modal added -->
    <div id="newFriendModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h3 class="modal-title">You Matched With</h1>
            </div>
            <div class="modal-body">
              <h2 id="newFriend"></h2>
              <img id="newFriendPhoto" src="#">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="overlay">
      <div class="spinner"></div>
    </div>

      <footer>
        <div id="footer" class="container">
          <a href="/api/friends">API Friends List</a> |
          <a href="https://github.com/legendary85/FriendFinder">GitHub Repo</a>
        </div>
      </footer>
    <!-- Small JS logic -->
    <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script type="text/javascript">
    $(document).ready(function(){
      window.addEventListener("load", function(){
        const loader = document.querySelector('.overlay');
        loader.className += " hidden";
      })

      $("#submit").on("click", function(event) {
        event.preventDefault();
        //to validate form
        var valid = true;
        if ($("#name").val() === "" || $("#photo").val() === "") {
          valid = false;
        } else if (
          $("#q1").val() === "empty" ||
          $("#q2").val() === "empty" ||
          $("#q3").val() === "empty" ||
          $("#q4").val() === "empty" ||
          $("#q5").val() === "empty" ||
          $("#q6").val() === "empty" ||
          $("#q7").val() === "empty" ||
          $("#q8").val() === "empty" ||
          $("#q9").val() === "empty" ||
          $("#q10").val() === "empty"
          ) {
            valid = false;
          }
          if (valid === true) {
            // alert("You have been submitted, Thanks!");
            var newUser = {
              name: $("#name")
              .val()
              .trim(),
              photo: $("#photo")
              .val()
              .trim(),
              scores: [
                $("#q1").val(),
                $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
                $("#q7").val(),
                $("#q8").val(),
                $("#q9").val(),
                $("#q10").val()
              ]
            };
            //test to see if logic works by allowing a newFriend object to be created
            console.log(newUser);
            console.log(newUser.name);
            
            // var currentURL = window.location.origin;
            //ajax call for receiving response after POST request
            $.post("/api/friends", newUser, function(data) {
              $("#newFriend").text(data.name);
              $("#newFriendPhoto").attr("src", data.photo).addClass("img-fluid");
              //Show best match with modal
              $("#newFriendModal").modal("toggle");
            });
            //if required field in missing, show alert
          } else {
            alert("Survey is incomplete");
          }
          clear();
        });

        function clear(){
                
                $("#name").val("");
                $("#photo").val("");
                $("#q1").val("empty"); 
                $("#q2").val("empty"); 
                $("#q3").val("empty");
                $("#q4").val("empty");
                $("#q5").val("empty");
                $("#q6").val("empty");
                $("#q7").val("empty");
                $("#q8").val("empty");
                $("#q9").val("empty");
                $("#q10").val("empty")

        }
      })
        </script>
        </body>
        </html>